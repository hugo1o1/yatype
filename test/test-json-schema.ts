import { JSONSchema4, JSONSchema4TypeName } from 'json-schema';
import { compile } from 'json-schema-to-typescript'
const fs = require('fs')

const sch = "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"list\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"activated\": {\n            \"type\": \"boolean\",\n            \"example\": false,\n            \"description\": \"是否生效中\"\n          },\n          \"activeTime\": {\n            \"type\": \"integer\",\n            \"format\": \"int64\",\n            \"description\": \"生效时间\"\n          },\n          \"applicantLdap\": {\n            \"type\": \"string\",\n            \"description\": \"申请人\"\n          },\n          \"applyReason\": {\n            \"type\": \"string\",\n            \"description\": \"申请原因\"\n          },\n          \"channelPurpose\": {\n            \"type\": \"string\",\n            \"description\": \"渠道用途\",\n            \"enum\": [\n              \"REISSUE_AFTER_SALE\",\n              \"OPERATION_ACTIVITY\",\n              \"INTERNAL\",\n              \"EXTERNAL\",\n              \"GIFT_REPLACE\"\n            ]\n          },\n          \"id\": {\n            \"type\": \"integer\",\n            \"format\": \"int64\"\n          },\n          \"inactiveTime\": {\n            \"type\": \"integer\",\n            \"format\": \"int64\",\n            \"description\": \"失效时间\"\n          },\n          \"name\": {\n            \"type\": \"string\",\n            \"description\": \"渠道名称\"\n          },\n          \"operatorLdap\": {\n            \"type\": \"string\",\n            \"description\": \"操作人\"\n          },\n          \"orgName\": {\n            \"type\": \"string\",\n            \"description\": \"渠道业务线\"\n          },\n          \"responsibleLdap\": {\n            \"type\": \"string\",\n            \"description\": \"负责人\"\n          },\n          \"reviewStatus\": {\n            \"type\": \"string\",\n            \"description\": \"审核状态\",\n            \"enum\": [\n              \"TO_BE_REVIEW\",\n              \"APPROVED\",\n              \"REJECTED\",\n              \"PENDING_CHANNEL_RESPONSIBLE\",\n              \"PENDING_SUPPLY_RESPONSIBLE\"\n            ]\n          },\n          \"secret\": {\n            \"type\": \"string\",\n            \"description\": \"密钥\"\n          }\n        },\n        \"description\": \"自定义发货渠道\",\n        \"$$ref\": \"#/definitions/CustomDeliveryChannelVO\"\n      }\n    },\n    \"pageInfo\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"currentPage\": {\n          \"type\": \"integer\",\n          \"format\": \"int32\"\n        },\n        \"pageSize\": {\n          \"type\": \"integer\",\n          \"format\": \"int32\"\n        },\n        \"totalItem\": {\n          \"type\": \"integer\",\n          \"format\": \"int32\"\n        },\n        \"totalPage\": {\n          \"type\": \"integer\",\n          \"format\": \"int32\"\n        }\n      },\n      \"$$ref\": \"#/definitions/PageInfo\"\n    }\n  },\n  \"$$ref\": \"#/definitions/Page«CustomDeliveryChannelVO»\"\n}"

compile(JSON.parse(sch) as JSONSchema4, 'MySchema')
    .then(ts => fs.writeFileSync('foo.d.ts', ts))